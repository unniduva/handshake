(this.webpackJsonpStudioSession=this.webpackJsonpStudioSession||[]).push([[17],{528:function(e,a,t){"use strict";t.r(a);t(174);var r=t(123),l=(t(168),t(72)),n=(t(346),t(345)),i=(t(172),t(82)),s=(t(302),t(306)),o=(t(525),t(522)),c=(t(457),t(18)),m=t(3),u=t.n(m),p=t(7),d=t(22),b=t(23),f=t(33),g=t(32),E=(t(459),t(461)),h=t(8),v=(t(303),t(305)),y=t(0),O=t.n(y),j=t(58),N=t(115),w=t(27),k=t(40),x=t.n(k),S=t(17),D=v.a.Item;function I(e){var a="image/jpeg"===e.type||"image/png"===e.type;a||E.a.error("You can only upload JPG/PNG file!");var t=e.size/1024/1024<2;return t?E.a.success("Image uploaded successfully."):E.a.error("Image must smaller than 2MB!"),a&&t}var U=function(e){Object(f.a)(t,e);var a=Object(g.a)(t);function t(e){var r;return Object(d.a)(this,t),(r=a.call(this,e)).cookie=JSON.parse(JSON.stringify(Object(S.b)())),r.handleUpload=function(e){"uploading"!==e.file.status?"done"===e.file.status&&(r.props.uploadProfileImage({files:e.file,userId:Object(w.b)(r.cookie.email)}),function(e,a){var t=new FileReader;t.addEventListener("load",(function(){return a(t.result)})),t.readAsDataURL(e)}(e.file.originFileObj,(function(e){return r.setState({imageUrl:e,loading:!1})}))):r.setState({loading:!0})},r.handleSubmit=function(e){e.preventDefault(),r.props.form.validateFields(function(){var e=Object(p.a)(u.a.mark((function e(a,t){var l,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=8;break}return console.log("Received values of form: ",t),console.log("this props= ",t.dob._d),l=new Date(t.dob._d),n=Object.assign({},t,{dob:l}),console.log("this props2= ",n),e.next=8,r.props.updateProfile(n);case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())},r.state={type:"password",icon:"passowrd-hide",phone:null,validation:!1,loading:!1},r}return Object(b.a)(t,[{key:"render",value:function(){var e=this.props,a=e.loading,t=e.user;if(a)return O.a.createElement(N.a,null);var m=this.props.form.getFieldDecorator,u=O.a.createElement("div",null,this.state.loading?O.a.createElement(c.a,{className:"loading-block",type:"loading"}):O.a.createElement(c.a,{className:"icon-block",type:"user"}));return O.a.createElement("main",{className:"main-inner-wrapper"},O.a.createElement("section",{className:"my-profile-wrapper"},t&&null!==t&&O.a.createElement("div",{className:"container"},O.a.createElement("h1",{className:"primary-title"},Object(w.a)("my_profile")),O.a.createElement(v.a,{className:"basic-form",onSubmit:this.handleSubmit},O.a.createElement("div",{className:"dp-block"},O.a.createElement(o.a,{name:"avatar",listType:"picture-card",className:"profile-pic-uploader",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:I,onChange:this.handleUpload},t.imgUrl?O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"icon-pencil hover-block"}),O.a.createElement("img",{className:"profile-pic",src:t.imgUrl,alt:"avatar",style:{width:"100%"}})):u)),O.a.createElement("div",{className:"form-block"},O.a.createElement(r.a,{gutter:20,type:"flex"},O.a.createElement(i.a,{xs:24,sm:12},O.a.createElement(D,{label:Object(w.a)("firstname")},m("fname",{rules:[{required:!0,message:Object(w.a)("v_email")||"Enter your first name"}],initialValue:t.firstName})(O.a.createElement(s.a,{placeholder:"Enter your first name",type:"text"})))),O.a.createElement(i.a,{xs:24,sm:12},O.a.createElement(D,{label:Object(w.a)("lastname")},m("lname",{rules:[{required:!1,message:Object(w.a)("v_email")}],initialValue:t.lastName})(O.a.createElement(s.a,{placeholder:"Enter your last name",type:"text"})))),O.a.createElement(i.a,{xs:24,sm:12},O.a.createElement(D,{label:"".concat(Object(w.a)("email")," ID")},m("email",{rules:[{required:!0,message:Object(w.a)("v_email")||"Please enter your Email ID"}],initialValue:t.email})(O.a.createElement(s.a,{placeholder:"Please enter your Email ID",type:"text",readOnly:!0})))),O.a.createElement(i.a,{xs:24,sm:12},O.a.createElement(v.a.Item,{label:Object(w.a)("dob")},m("dob",{rules:[{type:"object",required:!0,message:Object(w.a)("v_dob")||"Please select your date of birth!"}],initialValue:x()(t.Dob)})(O.a.createElement(n.a,{format:"DD/MM/YYYY"})))),O.a.createElement(i.a,{xs:24,sm:24},O.a.createElement(D,{style:{paddingTop:36}},O.a.createElement(l.a,{id:"signup",disabled:this.props.loading,loading:this.props.loading,htmlType:"submit",type:"primary",className:"submit-btn btn-has-icon uppercase btn-width-auto"},Object(w.a)("update_profile")||"Update Profile")))))))))}}]),t}(y.Component),P=v.a.create()(U);a.default=Object(j.b)((function(e){var a=e.user,t=e.studio;return Object(h.a)(Object(h.a)({},a),t)}),(function(e){var a=e.user,t=e.studio;return Object(h.a)(Object(h.a)({},a),t)}))(P)}}]);